Теперь, когда у нас есть механизм управления таблицами, пора научиться работать с данными внутри них. На этом этапе мы реализуем полный набор CRUD-операций (Create, Read, Update, Delete), научимся хранить данные таблиц в отдельных файлах и выводить их в удобном формате.
 

***Операции с данными***

Функции:
<command> insert into <имя_таблицы> values (<значение1>, <значение2>, ...) - создать запись.
<command> select from <имя_таблицы> where <столбец> = <значение> - прочитать записи по условию.
<command> select from <имя_таблицы> - прочитать все записи.
<command> update <имя_таблицы> set <столбец1> = <новое_значение1> where <столбец_условия> = <значение_условия> - обновить запись.
<command> delete from <имя_таблицы> where <столбец> = <значение> - удалить запись.
<command> info <имя_таблицы> - вывести информацию о таблице.
<command> exit - выход из программы
<command> help- справочная информация

>>>Введите команду: _ 

 
Пример:
 

database

***Операции с данными***

Функции:
<command> insert into <имя_таблицы> values (<значение1>, <значение2>, ...) - создать запись.
<command> select from <имя_таблицы> where <столбец> = <значение> - прочитать записи по условию.
<command> select from <имя_таблицы> - прочитать все записи.
<command> update <имя_таблицы> set <столбец1> = <новое_значение1> where <столбец_условия> = <значение_условия> - обновить запись.
<command> delete from <имя_таблицы> where <столбец> = <значение> - удалить запись.
<command> info <имя_таблицы> - вывести информацию о таблице.
<command> exit - выход из программы
<command> help- справочная информация

>>> Введите команду: insert into users values ("Sergei", 28, true)
Запись с ID=1 успешно добавлена в таблицу "users".

>>> Введите команду: select from users where age = 28
+----+--------+-----+-----------+
| ID |  name  | age | is_active |
+----+--------+-----+-----------+
| 1  | Sergei | 28  |    True   |
+----+--------+-----+-----------+

>>> Введите команду: update users set age = 29 where name = "Sergei"
Запись с ID=1 в таблице "users" успешно обновлена.

>>> Введите команду: delete from users where ID = 1
Запись с ID=1 успешно удалена из таблицы "users".

>>> Введите команду: info users
Таблица: users
Столбцы: ID:int, name:str, age:int, is_active:bool
Количество записей: 0 

 
Задачи

    Настройте хранение данных.
        Данные каждой таблицы будут храниться в отдельном JSON-файле в директории data/. Например, для таблицы users будет создан файл data/users.json.
        В utils.py создайте функции load_table_data(table_name) и save_table_data(table_name, data), которые будут работать по аналогии с load_metadata и save_metadata.
    Установите prettytable. Эта библиотека нужна для красивого вывода таблиц в консоль.
     

    poetry add prettytable 

     
    Реализуйте логику CRUD в core.py.
        insert(metadata, table_name, values):
            Проверяет, существует ли таблица.
            Проверяет, что количество переданных значений соответствует количеству столбцов (минус ID).
            Валидирует типы данных для каждого значения в соответствии со схемой в metadata.
            Генерирует новый ID (например, max(IDs) + 1 или len(data) + 1).
            Добавляет новую запись (в виде словаря) в данные таблицы и возвращает их.
        select(table_data, where_clause=None):
            Если where_clause не задан, возвращает все данные.
            Если задан (например, {'age': 28}), фильтрует и возвращает только подходящие записи.
        update(table_data, set_clause, where_clause):
            Находит записи по where_clause.
            Обновляет в найденных записях поля согласно set_clause.
            Возвращает измененные данные.
        delete(table_data, where_clause):
            Находит записи по where_clause и удаляет их.
            Возвращает измененные данные.
    Реализуйте парсеры для сложных команд.
        В engine.py или в отдельном файле parser.py создайте функции для разбора where и set условий. Они должны превращать строки вида "age = 28" в словари вида {'age': 28}.
        Подсказка: Это самая сложная часть. Упростите себе задачу: требуйте, чтобы строковые значения всегда были в кавычках.
    Интегрируйте CRUD-команды в engine.py.
        Расширьте главный цикл, добавив обработку новых команд.
        Перед вызовом функций из core загружайте данные нужной таблицы с помощью load_table_data.
        После успешных операций insert, update, delete сохраняйте измененные данные с помощью save_table_data.
        Для вывода select используйте prettytable, чтобы результат выглядел как в примере.
    Обновите README.md. Добавьте раздел "CRUD-операции" с описанием новых команд. Запишите asciinema с демонстрацией всех операций и вставьте ее в README.md.
    Обновите питоновский файл engine.py, через которую будет проходить взаимодействие.
    Выполните сборку и отладку публикации пакета. Убедитесь, что после установки пакета команда database в терминале запускает базу данных.

Примечание

    Команда insert не должна включать в себя значения столбца ID. Т.е. программа должна автоматически генерировать ID на основе последней записи. Если в таблице 9 столбцов, то на вход подаются 8 не включая значение ID
    Все поля считаются обязательными
    Для вывода данных в красивом формате воспользуйтесь библиотекой PrettyTable