Необходимо реализовать модуль “База Данных”. На этом этапе мы реализуем ядро нашей базы данных — модуль для управления таблицами. Мы научимся создавать, проверять и удалять таблицы, определять их структуру с типами данных и сохранять метаданные в JSON-файл для персистентности.
Модуль “База данных”
Синтаксис команд:

    create_table <имя_таблицы> <столбец1:тип> <столбец2:тип> ... создать таблицу.
    drop_table <имя_таблицы> удалить таблицу.
    list_tables показать список всех таблиц.
    help показать справку.
    exit выйти.
    Поддерживаемые типы данных: int, str, bool.

 

***База данных***

Функции:
<command> create_table <имя_таблицы> <столбец1:тип> <столбец2:тип> .. - создать таблицу
<command> list_tables - показать список всех таблиц
<command> drop_table <имя_таблицы> - удалить таблицу
<command> exit - выход из программы
<command> help - справочная информация

>>>Введите команду: _ 

 
Пример:
 

>>> database

***Процесс работы с таблицей***
Функции:
<command> create_table <имя_таблицы> <столбец1:тип> <столбец2:тип> .. - создать таблицу
<command> list_tables - показать список всех таблиц
<command> drop_table <имя_таблицы> - удалить таблицу
<command> exit - выход из программы
<command> help - справочная информация 

>>>Введите команду: create_table users name:str age:int is_active:bool
Таблица "users" успешно создана со столбцами: ID:int, name:str, age:int, is_active:bool

>>>Введите команду: create_table users name:str
Ошибка: Таблица "users" уже существует.

>>>Введите команду: list_tables
- users

>>>Введите команду: drop_table users
Таблица "users" успешно удалена.

>>>Введите команду: drop_table products
Ошибка: Таблица "products" не существует.

>>>Введите команду: help
***Процесс работы с таблицей***
Функции:
<command> create_table <имя_таблицы> <столбец1:тип> <столбец2:тип> .. - создать таблицу
<command> list_tables - показать список всех таблиц
<command> drop_table <имя_таблицы> - удалить таблицу
<command> exit - выход из программы
<command> help - справочная информация  

 
В случае, если пользователь подает неправильную функцию, необходимо вывести сообщение с некорректной функцией и повторно запросить команду:
 

Функции <некорректная функция> нет. Попробуйте снова.
Введите команду: _ 

 
В случае, если пользователь даст некорректное значение в функции, необходимо вывести сообщение и повторно запросить команду:
 

Некорректное значение: <значение>. Попробуйте снова.
Введите команду: _ 

 
Остальные случаи обработать самостоятельно.
Ссылки

    Don’t repeat yourself
    YAGNI
    KISS)

Задачи

    Создайте файлы архитектуру. В директории src/primitive_db создайте следующие файлы и директории:
    core.py: Здесь будет основная логика работы с таблицами и данными.
    engine.py: Этот файл будет отвечать за запуск, игровой цикл и парсинг команд.
    utils.py: Для вспомогательных функций (например, работа с файлами).
    Реализуйте хранение метаданных.
    В utils.py напишите две функции:
        load_metadata(filepath): Загружает данные из JSON-файла. Если файл не найден, возвращает пустой словарь {}. Используйте try...except FileNotFoundError.
        save_metadata(filepath, data): Сохраняет переданные данные в JSON-файл.
    Вся информация о таблицах (их имена и структура столбцов) будет храниться в одном файле, например, db_meta.json.
    Реализуйте логику управления таблицами в core.py.
    Напишите функцию create_table(metadata, table_name, columns).
        Она должна принимать текущие метаданные, имя таблицы и список столбцов.
        Автоматически добавлять столбец ID:int в начало списка столбцов.
        Проверять, не существует ли уже таблица с таким именем. Если да, выводить ошибку.
        Проверять корректность типов данных (только int, str, bool).
        В случае успеха, обновлять словарь metadata и возвращать его.
    Напишите функцию drop_table(metadata, table_name).
        Проверяет существование таблицы. Если таблицы нет, выводит ошибку.
        Удаляет информацию о таблице из metadata и возвращает обновленный словарь.
    Реализуйте engine.py.
    Создайте главную функцию run(), которая будет содержать основной цикл программы (while True).
    В цикле:
        Загружайте актуальные метаданные с помощью load_metadata.
        Запрашивайте ввод у пользователя.
        Разбирайте введенную строку на команду и аргументы. Подсказка: Для надежного разбора строки используйте библиотеку shlex. args = shlex.split(user_input).
        Используйте if/elif/else или match/case для вызова соответствующей функции из core.py.
        После каждой успешной операции (create_table, drop_table) сохраняйте измененные метаданные с помощью save_metadata.
    Обновите точку входа. В src/primitive_db/main.py измените вызов так, чтобы запускалась функция run() из engine.py.
    Обновите README.md. Добавьте в него раздел "Управление таблицами" с описанием команд и примером использования.
    Зафиксируйте изменения. Сделайте коммит и отправьте результат в ваш удаленный репозиторий.
    Выполните сборку и отладку публикации пакета. Убедитесь, что после установки пакета команда database в терминале запускает базу данных.
    Запишите аскинему с примером установки пакета, запуска БД, создание, проверку и удаление таблицы. Опубликуйте ее в сервисе и встройте ее в README.md

Примечание

    В случае, если столбец ID(уникальный ключ) не задается пользователем, то генерировать его самостоятельно.

Вспомогательные фрагменты кода
Функция помощи
Это простая функция, которая сразу заработает после добавления в обработчик команд.
 

# src/primitive_db/engine.py
def print_help():
    """Prints the help message for the current mode."""
   
    print("\n***Процесс работы с таблицей***")
    print("Функции:")
    print("<command> create_table <имя_таблицы> <столбец1:тип> .. - создать таблицу")
    print("<command> list_tables - показать список всех таблиц")
    print("<command> drop_table <имя_таблицы> - удалить таблицу")
    
    print("\nОбщие команды:")
    print("<command> exit - выход из программы")
    print("<command> help - справочная информация\n") 

 
 